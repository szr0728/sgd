<!DOCTYPE html>
<html>
<head>
    <meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
          name="viewport">
    <meta content="IE=edge,chrome=1;charset=utf-8" http-equiv="X-UA-Compatible">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="webkit" name="renderer"/>
    <meta content="index, follow" name="robots"/>
    <link href="qtimages/css/font-awesome.css" media="screen" rel="stylesheet" type="text/css"/>
    <link href="qtimages/css/bootstrap.css" media="screen" rel="stylesheet" type="text/css"/>
    <link href="qtimages/css/owl.carousel.css" media="screen" rel="stylesheet" type="text/css"/>
    <link href="qtimages/css/magnific-popup.css" media="screen" rel="stylesheet" type="text/css"/>
    <link href="qtimages/css/animate.css" media="screen" rel="stylesheet" type="text/css"/>
    <link href="qtimages/css/settings.css" media="screen" rel="stylesheet" type="text/css"/>
    <link href="qtimages/css/style-red.css" media="screen" rel="stylesheet" type="text/css"/>
    <link href="qtimages/css/tk.css" media="screen" rel="stylesheet" type="text/css"/>
    <script src="qtimages/js/jquery.min.js" type="text/javascript"></script>
    <script src="qtimages/js/jquery.migrate.js" type="text/javascript"></script>
    <script src="qtimages/js/bootstrap.js" type="text/javascript"></script>
    <script src="qtimages/js/owl.carousel.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $("#navigation #nav_0 .menu1").addClass("active");
        });
    </script>
    <link href="./qtimages/sl_common_form.css" rel="stylesheet">
    <title>留言板</title>
</head>
<body>
<div id="wrapper">
    <div id="container">
        <script src="qttop.js"></script>
        <script src="bht.js"></script>
        <div id="content">

            <div class="section-content team-section2 no-padd" id="index-news">
                <div class="title-section title2">
                    <div class="container triggerAnimation animated" data-animate="bounceIn">
                        <h1>留言板</h1>
                    </div>
                </div>
                <div class="team-box">
                    <div class="container">
                        <div class="row">
                            <div class="content-form">

                                <div style="padding: 0 20px">


                                    <!-- 表格主体-->
                                    <div style="margin-top: 10px">
                                        <div style="border: 1px solid #ff6b31;">
                                            <div style="padding: 5px; border-bottom: 1px solid #ff6b31; color: white; background-color: #ff6b31;">
                                                留言板
                                            </div>
                                            <div style="border: 1px solid #ccc; padding: 10px">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <form class="form-horizontal">
                                                            <input type="hidden" v-model="entity.id">
                                                            <table class="table table-striped table-bordered table-hover">
                                                                <tr>
                                                                    <td>用户名</td>
                                                                    <td><input class="form-control" disabled
                                                                               id="yonghuming"
                                                                               placeholder="请输入用户名"
                                                                               style="width: 160px"
                                                                               type="text"
                                                                               v-model="entity.yonghuming" value="user.yonghuming"></td>
                                                                </tr>
                                                                <tr>
                                                                    <td>昵称</td>
                                                                    <td><input class="form-control" id="cheng"
                                                                               placeholder="请输入昵称"
                                                                               style="width: 160px"
                                                                               type="text" v-model="entity.cheng"></td>
                                                                </tr>
                                                                <tr>
                                                                    <td>头像</td>
                                                                    <td><input checked id="touxiang"
                                                                               type="radio" v-model="entity.touxiang" value="1">
                                                                        <img height="71" src="img/1.gif" width="64">
                                                                        <input id="touxiang" type="radio"
                                                                               v-model="entity.touxiang" value="2">
                                                                        <img height="71" src="img/2.gif" width="64">
                                                                        <input id="touxiang" type="radio"
                                                                               v-model="entity.touxiang" value="3">
                                                                        <img height="71" src="img/3.gif" width="64">
                                                                        <input id="touxiang" type="radio"
                                                                               v-model="entity.touxiang" value="4">
                                                                        <img height="71" src="img/4.gif" width="64">
                                                                        <input id="touxiang" type="radio"
                                                                               v-model="entity.touxiang" value="5">
                                                                        <img height="71" src="img/5.gif" width="64">
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>标题</td>
                                                                    <td><input class="form-control" id="biaoti"
                                                                               placeholder="请输入标题"
                                                                               style="width: 360px"
                                                                               type="text" v-model="entity.biaoti">
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>内容</td>
                                                                    <td><textarea class="form-control" id="neirong"
                                                                                  placeholder="请输入内容"
                                                                                  style="width: 400px;height: 100px"
                                                                                  type="text"
                                                                                  v-model="entity.neirong"></textarea></td>
                                                                </tr>
                                                                <tr style='display:none'>
                                                                    <td>回复</td>
                                                                    <td><textarea class="form-control" id="huifu"
                                                                                  placeholder="请输入回复"
                                                                                  style="width: 400px;height: 100px"
                                                                                  type="text"
                                                                                  v-model="entity.huifu"></textarea></td>
                                                                </tr>

                                                            </table>
                                                        </form>
                                                        <div style="text-align: center">
                                                            <button class="btn btn-primary" type="button"
                                                                    v-on:click="update()">保存
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- 表格主体结束-->
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <script src="sidebufen.js"></script>
        </div>
        <script src="qtdown.js"></script>
    </div>
    <script src="qtimages/js/jquery.magnific-popup.min.js" type="text/javascript"></script>
    <script src="qtimages/js/jquery.appear.js" type="text/javascript"></script>
    <script src="qtimages/js/jquery.imagesloaded.min.js" type="text/javascript"></script>
    <script src="qtimages/js/jquery.isotope.min.js" type="text/javascript"></script>
    <script src="qtimages/js/retina-1.1.0.min.js" type="text/javascript"></script>
    <script src="qtimages/js/plugins-scroll.js" type="text/javascript"></script>
    <script src="qtimages/js/waypoint.min.js" type="text/javascript"></script>
    <script src="qtimages/js/jquery.themepunch.tools.min.js" type="text/javascript"></script>
    <script src="qtimages/js/jquery.themepunch.revolution.min.js" type="text/javascript"></script>
    <script src="qtimages/js/script.js" type="text/javascript"></script>
    <link href="qtimages/css/jquery.mmenu.all.css" rel="stylesheet" type="text/css"/>
    <script src="qtimages/js/jquery.mmenu.all.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            var mmenu = $('nav#mmenu').mmenu({
                slidingSubmenus: true,
                classes: 'mm-white',
                //mm-fullscreen mm-light
                extensions: ["theme-white"],
                offCanvas: {
                    position: "right",
                    //left, top, right, bottom
                    zposition: "front" //back, front,next
                    //modal		: true
                },
                searchfield: false,
                counters: false,
                //navbars		: {
                //content : [ "prev", "title", "next" ]
                //},
                navbar: {
                    title: "网站导航"
                },
                header: {
                    add: true,
                    update: true,
                    title: "网站导航"
                }
            });
            $(".closemenu").click(function () {
                var mmenuAPI = $("#mmenu").data("mmenu");
                mmenuAPI.close();
            });
        });
    </script>
    <!--daipxingxlun-->
</div>
<link href="css/common.css" rel="stylesheet">
<link href="css/nav.css" rel="stylesheet">
<link href="css/font-awesome.css" rel="stylesheet">
<link href="css/element/index.css" rel="stylesheet">
<link href="css/hsg.css" rel="stylesheet">
<script src="js/my.js"></script>
<script src="js/vue2.6.11/vue.min.js"></script>
<script src="js/vue2.6.11/axios.js"></script>
<script src="js/element/index.js"></script>
<script>
    function checkValid(entity) {
        if (!entity.yonghuming || entity.yonghuming === "") {
            alert("用户名不能为空");
            return false;
        }
        if (!entity.cheng || entity.cheng === "") {
            alert("昵称不能为空");
            return false;
        }

        return true;
    }

    new Vue({
        el: '#wrapper',
        data: {

            authority: [],
            permission: [],
            storeUser: JSON.parse(localStorage.getItem("user")),
            name: '',
            user: {},
            liuyanbanInfo: {},
            //hsgdanhejisuan
            //youtupianimrl
            objs: [],

            //youtupianavt
            //youxia2sui
            //youxxiabiaoxduan
            entity: {
                touxiang: '1',
                //youtupianflst
            }
        },
        created:
            function () {

                axios.get('/auth').then(res => {
                    if (res.data.code === '0') {
                        this.user = res.data.data;

                    } else {
                        alert('请先登录');
                        location.href = '/front/index.html';
                    }
                });
                this.user = JSON.parse(localStorage.getItem('user'));

                //   axios.get("/permission/3").then(res => {
                //       if (res.data.code === '0') {
                //           this.permission = res.data.data;
                //       } else {
                //           msg('error', res.data.msg);
                //       }
                //   });
                //   axios.get("/authority").then(res => {
                //       if (res.data.code === '0') {
                //           this.authority = res.data.data;
                //       } else {
                //           msg('error', res.data.msg);
                //       }
                //   });
                if (this.user.level === "用户") {
                    this.entity.yonghuming = this.user.yonghuming;
                }
                if (this.user.level === "管理员") {
                    this.entity.yonghuming = this.user.username;
                }
                //youcreatexia2sui
                //youffxiaxbiaoxduan
                //list23Nfbr
                //youtixing
            },
        methods: {

            //m_liangbuinit

            //liebiloadaoduqu

            update() {
                if (checkValid(this.entity)) {

                    if (!this.entity.id) {
                        axios.post(
                            "/liuyanbanInfo", this.entity
                        ).then(res => {
                            if (res.data.code === '0') {
                                msg('success', '添加成功');
                                $('#mod').modal('hide');
                                this.loadTable(1);
                            } else {
                                msg('error', res.data.msg);
                            }
                        })
                    }
                }
            },
            getQueryVariable(variable) {
                let query = window.location.search.substring(1);
                let vars = query.split("&");
                for (let i = 0; i < vars.length; i++) {
                    let pair = vars[i].split("=");
                    if (pair[0] === variable) {
                        return pair[1];
                    }
                }
                return '';
            },
            //m_tupiansccsbaul

            //youscwenjian

            //x2suilafuxzhi

            // logout() {
            //     axios.get("/logout").then(res => {
            //         if(res.data.code === '0') {
            //             location.href = '/front/index.html';
            //         } else {
            //             msg('error', res.data.msg);
            //         }
            //     })
            // }
        }
    })
</script>
</body>
</html>
